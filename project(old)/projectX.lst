MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;projectX
                      00002 ;HEART BEAT MEASURING UNIT
                      00003 ;FIT_B10
                      00004 ;Sun 24 Apr 2011 08:37:52 PM IST
                      00005 ;ortiginally writtrn by ruwan jayasinghe
                      00006 
                      00007 
Warning[205]: Found directive in column 1. (LIST)
                      00008 LIST P=16F877A
                      00009 #INCLUDE"P16F877A.INC"
                      00001         LIST
                      00002 ; P16F877A.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00400         LIST
                      00010 
Warning[205]: Found directive in column 1. (__config)
2007   3F39           00011 __config  _CP_OFF & _WDT_OFF & _BODEN_OFF & _PWRTE_OFF & _XT_OSC & _LVP_OFF 
                      00012 
                      00013 ;######################################################################
                      00014 
                      00015 #define bitz            STATUS,Z
                      00016 #define bitc            STATUS,C
                      00017 #define interren        INTCON,T0IE             ;timer interrupt enable bit
                      00018 #define dataen          PORTB,0                 ;select instruction registry
                      00019 #define signalen        PORTB,1                 ;signal enable bit
                      00020 #define dataport        PORTD                   ;PORT used to send data
                      00021 #define bitbuzz         PORTB,2                 ;port bit of buzzer pwr
                      00022 
Warning[205]: Found directive in column 1. (cblock)
                      00023 cblock  0x20
  00000020            00024         finalmean,finalmeanf    ;used to save final result of
  00000022            00025         counth,countl   ;clock counter values
  00000024            00026         tcounth,tcountl ;clock counter values saved for further usage
  00000026            00027         meancount       ;8bit counter
  00000027            00028         tdatah,tdatal   ;a/d converted values
  00000029            00029         decerr          ;error count in high pulse check
  0000002A            00030         margin          ;saves the median voltage
  0000002B            00031         m7,m6,m5,m4,m3,m2,m1,m0 ;divide func t8:t7:t6/tcounth:tcountl=[m1.m0]
  00000033            00032         txchk,txchk1            ;counter
  00000035            00033         msgptr          ;data table reading pointer
  00000036            00034         var0,var1,var2,var3,var4,var5
  0000003C            00035         lcdptr
  0000003D            00036         tempchar
  0000003E            00037         t0,t1,t2,t3,t4,t5,t6,t7,t8,t9
  00000048            00038         lowvolt,highvolt
Warning[205]: Found directive in column 1. (ENDC)
                      00039 endc
                      00040 
                      00041 ;######################################################################
                      00042 
                      00043 signal  MACRO
                      00044         BSF     signalen
                      00045         NOP
                      00046         NOP
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00047         NOP
                      00048         BCF     signalen
                      00049         NOP
                      00050         NOP
                      00051         ENDM
                      00052 
                      00053 ;######################################################################
                      00054 
Warning[205]: Found directive in column 1. (ORG)
0000                  00055 ORG     0x0000
Warning[203]: Found opcode in column 1. (GOTO)
0000   28C7           00056 GOTO    main
Warning[205]: Found directive in column 1. (ORG)
0004                  00057 ORG     0x0004          ;interrupt
Warning[203]: Found opcode in column 1. (GOTO)
0004   28AD           00058 GOTO    interrupt
                      00059 
0005                  00060 LINEMSGTEMP:
0005   0082           00061         MOVWF   PCL
                      00062 
0006   3448 3445 3441 00063 msg0    DT      "HEART BEAT COUNT|"                     ;welcome message
       3452 3454 3420 
       3442 3445 3441 
       3454 3420 3443 
       344F 3455 344E 
       3454 347C 
0017   3465 3472 3472 00064 msg1    DT      "error in serial_  transmitting|"
       346F 3472 3420 
       3469 346E 3420 
       3473 3465 3472 
       3469 3461 346C 
       345F 3420 3420 
       3474 3472 3461 
       346E 3473 346D 
       3469 3474 3474 
       3469 346E 3467 
       347C 
0036   3420 3420 3450 00065 msg2    DT      "  Please wait_  few seconds|"          ;wait for sampleling heart beat
       346C 3465 3461 
       3473 3465 3420 
       3477 3461 3469 
       3474 345F 3420 
       3420 3466 3465 
       3477 3420 3473 
       3465 3463 346F 
       346E 3464 3473 
       347C 
0052   3448 3465 3461 00066 msg3    DT      "Heart beat rate:_  %d.%f bps|"         ;heart beat rate display
       3472 3474 3420 
       3462 3465 3461 
       3474 3420 3472 
       3461 3474 3465 
       343A 345F 3420 
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3420 3425 3464 
       342E 3425 3466 
       3420 3462 3470 
       3473 347C 
006F   3465 3472 3472 00067 msg5    DT      "error detecting_heart beat pulse|"
       346F 3472 3420 
       3464 3465 3474 
       3465 3463 3474 
       3469 346E 3467 
       345F 3468 3465 
       3461 3472 3474 
       3420 3462 3465 
       3461 3474 3420 
       3470 3475 346C 
       3473 3465 347C 
0090   3420 3420 3463 00068 msg6    DT      "  connected to_  serial port|"
       346F 346E 346E 
       3465 3463 3474 
       3465 3464 3420 
       3474 346F 345F 
       3420 3420 3473 
       3465 3472 3469 
       3461 346C 3420 
       3470 346F 3472 
       3474 347C 
                      00069 
                      00070 ;######################################################################
                      00071 
00AD                  00072 interrupt:
Warning[203]: Found opcode in column 1. (MOVLW)
00AD   30D1           00073 MOVLW   0xD1            ;timer reset
Warning[203]: Found opcode in column 1. (MOVWF)
00AE   0081           00074 MOVWF   TMR0
Warning[205]: Found directive in column 1. (BANKSEL)
00AF   1283 1303      00075 BANKSEL INTCON
Warning[203]: Found opcode in column 1. (BCF)
00B1   110B           00076 BCF     INTCON,T0IF
Warning[205]: Found directive in column 1. (BANKSEL)
00B2   1283 1303      00077 BANKSEL INTCON
Warning[203]: Found opcode in column 1. (BCF)
00B4   128B           00078 BCF     interren
Warning[205]: Found directive in column 1. (BANKSEL)
00B5   1283 1303      00079 BANKSEL INTCON
Warning[203]: Found opcode in column 1. (BCF)
00B7   128B           00080 BCF     interren
Warning[205]: Found directive in column 1. (BANKSEL)
00B8   1283 1303      00081 BANKSEL ADRESH          ;adget
Warning[203]: Found opcode in column 1. (MOVF)
00BA   081E           00082 MOVF    ADRESH,W
Warning[203]: Found opcode in column 1. (MOVWF)
00BB   00A7           00083 MOVWF   tdatah
Warning[205]: Found directive in column 1. (BANKSEL)
00BC   1683 1303      00084 BANKSEL ADRESL
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[203]: Found opcode in column 1. (MOVF)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00BE   081E           00085 MOVF    ADRESL,W
Warning[203]: Found opcode in column 1. (MOVWF)
00BF   00A8           00086 MOVWF   tdatal
Warning[205]: Found directive in column 1. (BANKSEL)
00C0   1283 1303      00087 BANKSEL ADCON0          ;adset  
Warning[203]: Found opcode in column 1. (BSF)
00C2   151F           00088 BSF     ADCON0,GO       ;godone bit set here
Warning[203]: Found opcode in column 1. (INCFSZ)
00C3   0FA3           00089 INCFSZ  countl,F
Warning[203]: Found opcode in column 1. (RETURN)
00C4   0008           00090 RETURN
Warning[203]: Found opcode in column 1. (INCF)
00C5   0AA2           00091 INCF    counth,F
Warning[203]: Found opcode in column 1. (RETURN)
00C6   0008           00092 RETURN
                      00093 
                      00094 
                      00095 ;######################################################################
                      00096 
00C7                  00097 main:
00C7   1683 1303      00098         BANKSEL TRISA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00C9   1485           00099         BSF     TRISA,1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00CA   0186           00100         CLRF    TRISB
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00CB   0188           00101         CLRF    TRISD
00CC   1283 1303      00102         BANKSEL PORTB
00CE   0186           00103         CLRF    PORTB
00CF   0188           00104         CLRF    PORTD
00D0   1683 1303      00105         BANKSEL TRISC           ;configure pins for serial transmitting
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D2   1307           00106         BCF     TRISC,6         ;c6=0 as output
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D3   1787           00107         BSF     TRISC,7         ;c7=1 as input
                      00108         
00D4                  00109 timerinit:
00D4   1283 1303      00110         BANKSEL INTCON
00D6   018B           00111         CLRF    INTCON
00D7   178B           00112         BSF     INTCON,GIE
00D8   1683 1303      00113         BANKSEL OPTION_REG      
00DA   30C0           00114         MOVLW   0xC0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00DB   0081           00115         MOVWF   OPTION_REG
                      00116         
00DC                  00117 adinit:
00DC   1683 1303      00118         BANKSEL ADCON1
00DE   300E           00119         MOVLW   0x0E
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00DF   009F           00120         MOVWF   ADCON1
00E0   1283 1303      00121         BANKSEL ADCON0
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E2   3041           00122         MOVLW   0x41    ;godone bit not set here
00E3   009F           00123         MOVWF   ADCON0
                      00124                 
00E4                  00125 lcdinit:
00E4   3030           00126         MOVLW   0x0030  ;setting function set
00E5   2276           00127         CALL    cmd
00E6   3030           00128         MOVLW   0x0030  ;setting function set
00E7   2276           00129         CALL    cmd
00E8   3030           00130         MOVLW   0x0030  ;setting function set
00E9   2276           00131         CALL    cmd
00EA   3038           00132         MOVLW   0x0038  ;setting function set
00EB   2276           00133         CALL    cmd
00EC   300F           00134         MOVLW   0x000F  ;display ON/OFF control[1,display on,curser off,blinck off]
00ED   2276           00135         CALL    cmd
00EE   3006           00136         MOVLW   0x0006  ;entry mode set[1,increment on,display shift off]
00EF   2276           00137         CALL    cmd
00F0   3001           00138         MOVLW   0x0001  ;clear display
00F1   2276           00139         CALL    cmd
                      00140 
00F2                  00141 usartinit:
00F2   1283 1303      00142         BANKSEL RCSTA
00F4   1798           00143         BSF     RCSTA,SPEN
00F5   1683 1303      00144         BANKSEL TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00F7   1698           00145         BSF     TXSTA,TXEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00F8   1518           00146         BSF     TXSTA,BRGH
00F9   1683 1303      00147         BANKSEL SPBRG           ;setting up baud rate
00FB   3019           00148         MOVLW   D'25'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FC   0099           00149         MOVWF   SPBRG
                      00150 
                      00151 ;######################################################################
                      00152         
00FD                  00153 welcome:
00FD   3006           00154         MOVLW   msg0
00FE   223C           00155         CALL    sendmsg
00FF   30C0           00156 WCMF0:  MOVLW   0xC0
0100   2276           00157         CALL    cmd
0101   3010           00158         MOVLW   0x10
0102   00B5           00159         MOVWF   msgptr
0103   3003           00160         MOVLW   0x03
0104   00B3           00161         MOVWF   txchk
0105   30FF           00162 WCMF1:  MOVLW   0xFF
0106   2267           00163         CALL    sendchar
0107   0BB5           00164         DECFSZ  msgptr,F
0108   2905           00165         GOTO    WCMF1
0109   30C0           00166         MOVLW   0xC0
010A   2276           00167         CALL    cmd
010B   3019           00168         MOVLW   0x19
010C   00B5           00169         MOVWF   msgptr
010D   3020           00170 WCMF2:  MOVLW   0x20
010E   2267           00171         CALL    sendchar
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

010F   0BB5           00172         DECFSZ  msgptr,F
0110   290D           00173         GOTO    WCMF2
0111   0BB3           00174         DECFSZ  txchk,F
0112   28FF           00175         GOTO    WCMF0
0113   3001           00176         MOVLW   0x0001  ;clear display
0114   2276           00177         CALL    cmd
                      00178 ;######################################################################
                      00179 
0115                  00180 xvoltage:
0115   01A2           00181         CLRF    counth
0116   01A3           00182         CLRF    countl
0117   30FF           00183         MOVLW   0xFF
0118   00C8           00184         MOVWF   lowvolt
0119   2282           00185 XVLT0:  CALL    inf
011A   0827           00186         MOVF    tdatah,W
011B   0249           00187         SUBWF   highvolt,W
011C   1803           00188         BTFSC   bitc
011D   2920           00189         GOTO    XVLT2
011E   0827           00190         MOVF    tdatah,W
011F   00C9           00191         MOVWF   highvolt
0120   0848           00192 XVLT2:  MOVF    lowvolt,W
0121   0227           00193         SUBWF   tdatah,W
0122   1803           00194         BTFSC   bitc
0123   2926           00195         GOTO    XVLT3
0124   0827           00196         MOVF    tdatah,W
0125   00C8           00197         MOVWF   lowvolt
0126   1FA2           00198 XVLT3:  BTFSS   counth,7
0127   2919           00199         GOTO    XVLT0   
0128   0848           00200         MOVF    lowvolt,W
0129   0249           00201         SUBWF   highvolt,W
012A   00AA           00202         MOVWF   margin
012B   3C10           00203         SUBLW   0x10
012C   1803           00204         BTFSC   bitc
012D   2915           00205         GOTO    xvoltage
012E   1003           00206         BCF     bitc
012F   0CAA           00207         RRF     margin,F
0130   1003           00208         BCF     bitc
0131   0CAA           00209         RRF     margin,F
0132   082A           00210         MOVF    margin,W
0133   0249           00211         SUBWF   highvolt,W
0134   00AA           00212         MOVWF   margin
                      00213 
                      00214 ;######################################################################
                      00215 
0135                  00216 usartcheck:
0135   01B3           00217         CLRF    txchk
0136   01B4           00218         CLRF    txchk1
0137   17B3           00219         BSF     txchk,7
0138   1734           00220         BSF     txchk1,6
0139                  00221 TXCF2:
0139   1683 1303      00222         BANKSEL TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
013B   1C98           00223         BTFSS   TXSTA,TRMT
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

013C   2944           00224         GOTO    TXCF1
013D   30FF           00225         MOVLW   0xFF
013E   0099           00226         MOVWF   TXREG
013F   0BB4           00227         DECFSZ  txchk1,F
0140   2944           00228         GOTO    TXCF1
0141   3090           00229         MOVLW   msg6
0142   223C           00230         CALL    sendmsg
0143   294A           00231         GOTO    usartroutine
0144                  00232 TXCF1:
0144   0BB3           00233         DECFSZ  txchk,F
0145   2939           00234         GOTO    TXCF2
0146   1683 1303      00235         BANKSEL TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0148   1298           00236         BCF     TXSTA,TXEN
0149   2966           00237         GOTO    LCDF
                      00238 
                      00239 ;######################################################################
                      00240 
014A                  00241 usartroutine:
014A   01B3           00242         CLRF    txchk
014B   17B3           00243         BSF     txchk,7
014C                  00244 TXRF0:
014C   1683 1303      00245         BANKSEL TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
014E   1898           00246         BTFSC   TXSTA,TRMT
014F   2955           00247         GOTO    TXRF2
0150   0BB3           00248         DECFSZ  txchk,F
0151   294C           00249         GOTO    TXRF0   
0152   3017           00250         MOVLW   msg1
0153   223C           00251         CALL    sendmsg
0154   2935           00252         GOTO    usartcheck
0155                  00253 TXRF2:
Message[305]: Using default destination of 1 (file).
0155   08A7           00254         MOVF    tdatah
0156   0099           00255         MOVWF   TXREG
0157   01B3           00256         CLRF    txchk
0158   17B3           00257         BSF     txchk,7
0159                  00258 TXRF1:  
0159   1683 1303      00259         BANKSEL TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
015B   1898           00260         BTFSC   TXSTA,TRMT
015C   2962           00261         GOTO    TXRF3
015D   0BB3           00262         DECFSZ  txchk,F
015E   2959           00263         GOTO    TXRF1   
015F   3017           00264         MOVLW   msg1
0160   223C           00265         CALL    sendmsg
0161   2935           00266         GOTO    usartcheck
0162                  00267 TXRF3:
Message[305]: Using default destination of 1 (file).
0162   08A8           00268         MOVF    tdatal
0163   0099           00269         MOVWF   TXREG
0164   2282           00270         CALL    inf
0165   294A           00271         GOTO    usartroutine
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00272 
                      00273 ;######################################################################
                      00274 
0166                  00275 LCDF:
0166   15A6           00276         BSF     meancount,3
0167   3036           00277         MOVLW   msg2
0168   223C           00278         CALL    sendmsg
                      00279 
0169                  00280 lcdroutine:
0169   14A9           00281         BSF             decerr,1
016A   082A           00282 hpc:    MOVF    margin,W
016B   0227           00283         SUBWF   tdatah,W
016C   1C03           00284         BTFSS   bitc
016D   297A           00285         GOTO    HPCF0
016E   0822           00286         MOVF    counth,W
016F   3C06           00287         SUBLW   0x06
0170   1803           00288         BTFSC   bitc
0171   297E           00289         GOTO    HPCF2
0172   0823           00290         MOVF    countl,W
0173   00A5           00291         MOVWF   tcountl
0174   0822           00292         MOVF    counth,W
0175   00A4           00293         MOVWF   tcounth
0176   01A3           00294         CLRF    countl
0177   01A2           00295         CLRF    counth
0178   2282           00296         CALL    inf
0179   2986           00297         GOTO    divide
017A   1BA2           00298 HPCF0:  BTFSC   counth,7
017B   297E           00299         GOTO    HPCF2
017C   2282           00300         CALL    inf
017D   296A           00301         GOTO    hpc
017E   01A3           00302 HPCF2:  CLRF    countl
017F   01A2           00303         CLRF    counth
0180   2282           00304         CALL    inf
0181   0BA9           00305         DECFSZ  decerr,F
0182   296A           00306         GOTO    hpc
0183   306F           00307         MOVLW   msg5
0184   223C           00308         CALL    sendmsg
0185   2915           00309         GOTO    xvoltage
                      00310 
                      00311 ;######################################################################
                      00312 
0186                  00313 divide: 
0186   3009           00314         MOVLW   0x09
0187   00C6           00315         MOVWF   t8
0188   3027           00316         MOVLW   0x27
0189   00C5           00317         MOVWF   t7
018A   30C0           00318         MOVLW   0xC0
018B   00C4           00319         MOVWF   t6
018C   01B2           00320         CLRF    m0      
018D   01B1           00321         CLRF    m1
018E   01BE           00322         CLRF    t0
018F   163E           00323         BSF     t0,4
0190   1003           00324 DVLP1:  BCF     STATUS,C
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0191   0DB2           00325         RLF     m0,F
0192   0DB1           00326         RLF     m1,F            
0193   0DC4           00327         RLF     t6,F
0194   0DC5           00328         RLF     t7,F
0195   0DC6           00329         RLF     t8,F
0196   0824           00330         MOVF    tcounth,W
0197   0246           00331         SUBWF   t8,W
0198   1C03           00332         BTFSS   bitc
0199   29A8           00333         GOTO    DVLP
019A   1D03           00334         BTFSS   bitz
019B   29A0           00335         GOTO    DVLP2
019C   0825           00336         MOVF    tcountl,W
019D   0245           00337         SUBWF   t7,W
019E   1C03           00338         BTFSS   bitc
019F   29A8           00339         GOTO    DVLP
01A0   0825           00340 DVLP2:  MOVF    tcountl,W
01A1   02C5           00341         SUBWF   t7,F
01A2   1C03           00342         BTFSS   bitc
01A3   03C6           00343         DECF    t8,F
01A4   0824           00344         MOVF    tcounth,W
01A5   02C6           00345         SUBWF   t8,F    
01A6   1432           00346         BSF     m0,0
01A7   29A8           00347         GOTO    DVLP
01A8   2282           00348 DVLP:   CALL    inf
01A9   0BBE           00349         DECFSZ  t0,F
01AA   2990           00350         GOTO    DVLP1
                      00351 
                      00352 ;######################################################################
                      00353 
01AB                  00354 getmean:
01AB   0832           00355         MOVF    m0,W
01AC   07B0           00356         ADDWF   m2,F
01AD   1803           00357         BTFSC   bitc
01AE   0A31           00358         INCF    m1,W
01AF   07AF           00359         ADDWF   m3,F
01B0   0CAF           00360         RRF     m3,F
01B1   0CB0           00361         RRF     m2,F    ;ZZZZZ2
01B2   0830           00362         MOVF    m2,W
01B3   07AE           00363         ADDWF   m4,F
01B4   1803           00364         BTFSC   bitc
01B5   0A2F           00365         INCF    m3,W
01B6   07AD           00366         ADDWF   m5,F
01B7   0CAD           00367         RRF     m5,F
01B8   0CAE           00368         RRF     m4,F    ;ZZZZZ4
01B9   082E           00369         MOVF    m4,W
01BA   07A1           00370         ADDWF   finalmeanf,F
01BB   1803           00371         BTFSC   bitc
01BC   0A2D           00372         INCF    m5,W
01BD   07A0           00373         ADDWF   finalmean,F
01BE   0CA0           00374         RRF     finalmean,F
01BF   0CA1           00375         RRF     finalmeanf,F    ;ZZZZZ8
01C0   0832           00376         MOVF    m0,W
01C1   00B0           00377         MOVWF   m2
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01C2   0831           00378         MOVF    m1,W
01C3   00AF           00379         MOVWF   m3
01C4   0830           00380         MOVF    m2,W
01C5   00AE           00381         MOVWF   m4
01C6   082F           00382         MOVF    m3,W
01C7   00AD           00383         MOVWF   m5
01C8   082E           00384         MOVF    m4,W
01C9   00A1           00385         MOVWF   finalmeanf
01CA   082D           00386         MOVF    m5,W
01CB   00A0           00387         MOVWF   finalmean
01CC   0B26           00388         DECFSZ  meancount,W
01CD   2969           00389         GOTO    lcdroutine
01CE   15A6           00390         BSF     meancount,3
01CF   0820           00391         MOVF    finalmean,W
01D0   3C64           00392         SUBLW   .100
01D1   1803           00393         BTFSC   bitc
01D2   1506           00394         BSF     bitbuzz
01D3   0820           00395         MOVF    finalmean,W
01D4   3C3C           00396         SUBLW   .60
01D5   1C03           00397         BTFSS   bitc
01D6   1506           00398         BSF     bitbuzz
                      00399 
                      00400 ;######################################################################
                      00401 
01D7                  00402 decimals:
01D7   01BF           00403         CLRF    t1
01D8   01BE           00404         CLRF    t0
01D9   0820           00405         MOVF    finalmean,W
01DA   2221           00406         CALL    DECC
01DB   2282           00407         CALL    inf
01DC   083F           00408         MOVF    t1,W
01DD   00B8           00409         MOVWF   var2
01DE   083E           00410         MOVF    t0,W
01DF   01BF           00411         CLRF    t1
01E0   01BE           00412         CLRF    t0
01E1   2221           00413         CALL    DECC
01E2   2282           00414         CALL    inf
01E3   083F           00415         MOVF    t1,W
01E4   00B7           00416         MOVWF   var1
01E5   083E           00417         MOVF    t0,W
01E6   00B6           00418         MOVWF   var0
                      00419         
01E7   0103           00420         CLRW            ;dividing stuff here
01E8   1821           00421         BTFSC   finalmeanf,0
01E9   3E09           00422         ADDLW   .9
01EA   18A1           00423         BTFSC   finalmeanf,1
01EB   3E08           00424         ADDLW   .8
01EC   1921           00425         BTFSC   finalmeanf,2
01ED   3E06           00426         ADDLW   .6
01EE   19A1           00427         BTFSC   finalmeanf,3
01EF   3E02           00428         ADDLW   .2
01F0   1A21           00429         BTFSC   finalmeanf,4
01F1   3E05           00430         ADDLW   .5
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01F2   3E01           00431         ADDLW   .1
01F3   2221           00432         CALL    DECC
01F4   2282           00433         CALL    inf
01F5   083E           00434         MOVF    t0,W
01F6   01BE           00435         CLRF    t0              ;&&&&&&&&&&&&&&&
01F7   1821           00436         BTFSC   finalmeanf,0
01F8   3E03           00437         ADDLW   .3
01F9   18A1           00438         BTFSC   finalmeanf,1
01FA   3E07           00439         ADDLW   .7
01FB   1921           00440         BTFSC   finalmeanf,2
01FC   3E05           00441         ADDLW   .5
01FD   19A1           00442         BTFSC   finalmeanf,3
01FE   3E01           00443         ADDLW   .1
01FF   1A21           00444         BTFSC   finalmeanf,4
0200   3E02           00445         ADDLW   .2
0201   1AA1           00446         BTFSC   finalmeanf,5
0202   3E05           00447         ADDLW   .5
0203   2221           00448         CALL    DECC
0204   2282           00449         CALL    inf
0205   083E           00450         MOVF    t0,W
0206   01BE           00451         CLRF    t0              ;&&&&&&&&&&&&&&&
0207   1921           00452         BTFSC   finalmeanf,2
0208   3E01           00453         ADDLW   .1
0209   19A1           00454         BTFSC   finalmeanf,3
020A   3E03           00455         ADDLW   .3
020B   1A21           00456         BTFSC   finalmeanf,4
020C   3E06           00457         ADDLW   .6
020D   1AA1           00458         BTFSC   finalmeanf,5
020E   3E02           00459         ADDLW   .2
020F   1B21           00460         BTFSC   finalmeanf,6
0210   3E05           00461         ADDLW   .5
0211   2221           00462         CALL    DECC
0212   2282           00463         CALL    inf
0213   083F           00464         MOVF    t1,W
0214   00BA           00465         MOVWF   var4
0215   083E           00466         MOVF    t0,W
0216   01BE           00467         CLRF    t0              ;&&&&&&&&&&&&&&&
0217   01BF           00468         CLRF    t1
0218   1AA1           00469         BTFSC   finalmeanf,5
0219   3E01           00470         ADDLW   .1
021A   1B21           00471         BTFSC   finalmeanf,6
021B   3E02           00472         ADDLW   .2
021C   1BA1           00473         BTFSC   finalmeanf,7
021D   3E05           00474         ADDLW   .5
021E   083F           00475         MOVF    t1,W
021F   00B9           00476         MOVWF   var3
0220   2A27           00477         GOTO    sendxmsg
                      00478 
0221                  00479 DECC:
0221   3C0A           00480         SUBLW   .10
0222   1C03           00481         BTFSS   bitc
0223   0008           00482         RETURN
0224   00BF           00483         MOVWF   t1
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0225   0ABE           00484         INCF    t0,F
0226   2A21           00485         GOTO    DECC
                      00486 
                      00487 ;######################################################################
                      00488 
0227                  00489 sendxmsg:
0227   3052           00490         MOVLW   msg3
0228   223C           00491         CALL    sendmsg
0229   3040           00492         MOVLW   0x40
022A   224F           00493         CALL    sendvarmsg
                      00494         
022B   0822           00495 lpc:    MOVF    counth,W
022C   3C05           00496         SUBLW   0x05
022D   1803           00497         BTFSC   bitc
022E   2A37           00498         GOTO    LPCF0
022F   0827           00499         MOVF    tdatah,W
0230   022A           00500         SUBWF   margin,W
0231   1C03           00501         BTFSS   bitc
0232   2A35           00502         GOTO    LPCF1
0233   2282           00503         CALL    inf
0234   2969           00504         GOTO    lcdroutine
0235   1BA2           00505 LPCF1:  BTFSC   counth,7
0236   2A39           00506         GOTO    LPCF2
0237   2282           00507 LPCF0:  CALL    inf
0238   2A2B           00508         GOTO    lpc
0239   306F           00509 LPCF2:  MOVLW   msg5
023A   223C           00510         CALL    sendmsg
023B   2915           00511         GOTO    xvoltage
                      00512 
                      00513 ;######################################################################
                      00514 
023C                  00515 sendmsg:                        ;starting register should loaded to msgptr
023C   00B5           00516         MOVWF   msgptr          ;variable 'tempchar' used to handle a character
023D   0835           00517         MOVF    msgptr,W        ;'LINEMSGTEMP' function should be initialized near character data tables
023E   2005           00518         CALL    LINEMSGTEMP     ;'sendchar' function used to send a character
023F   00BD           00519         MOVWF   tempchar        ;once called lineXsg function whole data table characters send to LCD
0240   0AB5           00520         INCF    msgptr,F
0241   083D           00521         MOVF    tempchar,W
0242   3A5F           00522         XORLW   0x5F
0243   1903           00523         BTFSC   bitz
0244   2A4C           00524         GOTO    NEWLINE
0245   083D           00525         MOVF    tempchar,W      
0246   3A7C           00526         XORLW   0x7C
0247   1903           00527         BTFSC   bitz
0248   0008           00528         RETURN
0249   083D           00529         MOVF    tempchar,W
024A   2267           00530         CALL    sendchar
024B   2A3C           00531         GOTO    sendmsg
024C                  00532 NEWLINE:
024C   30C0           00533         MOVLW   0x00C0
024D   2276           00534         CALL    cmd
024E   2A3C           00535         GOTO    sendmsg
                      00536 
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00537 ;######################################################################
                      00538 
024F                  00539 sendvarmsg:
024F   00BC           00540         MOVWF   lcdptr          ;starting register should loaded to msgptr
0250   3E81           00541         ADDLW   0x81            ;variable 'tempchar' used to handle a character
0251   2276           00542         CALL    cmd             ;'LINEMSGTEMP' function should be initialized near character data tables
0252   0836           00543         MOVF    var0,W          ;'sendchar' function used to send a character
0253   3A00           00544         XORLW   0x00            ;once called lineXsg function whole data table characters send to LCD
0254   1D03           00545         BTFSS   bitz            
0255   3E10           00546         ADDLW   0x10
0256   3E20           00547         ADDLW   0x20
0257   2267           00548         CALL    sendchar
0258   0837           00549         MOVF    var1,W
0259   3E30           00550         ADDLW   0x30    
025A   2267           00551         CALL    sendchar
025B   0838           00552         MOVF    var2,W
025C   3E30           00553         ADDLW   0x30    
025D   2267           00554         CALL    sendchar
025E   302E           00555         MOVLW   A'.'
025F   2267           00556         CALL    sendchar
0260   083A           00557         MOVF    var4,W
0261   3E30           00558         ADDLW   0x30    
0262   2267           00559         CALL    sendchar        
0263   083B           00560         MOVF    var5,W
0264   3E30           00561         ADDLW   0x30    
0265   2267           00562         CALL    sendchar
0266   0008           00563         RETURN
                      00564 
                      00565 ;######################################################################
                      00566 
0267                  00567 sendchar:                       ;send a character to LCD
0267   0088           00568         MOVWF   dataport
0268   0000           00569         NOP
0269   1406           00570         BSF     dataen          ;select data registry
                      00571         signal                  ;signal enable macro
026A   1486               M         BSF     signalen
026B   0000               M         NOP
026C   0000               M         NOP
026D   0000               M         NOP
026E   1086               M         BCF     signalen
026F   0000               M         NOP
0270   0000               M         NOP
0271   0000           00572         NOP
0272   0188           00573         CLRF    dataport        ;make all PORTB outputs low
0273   1006           00574         BCF     dataen          ;select instruction registry
0274   2282           00575         CALL    inf
0275   0008           00576         RETURN
                      00577 
                      00578 ;######################################################################
                      00579 
0276   0088           00580 cmd:    MOVWF   dataport        ;send command to PORTB
0277   0000           00581         NOP
                      00582         signal                  ;signal enable macro
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0278   1486               M         BSF     signalen
0279   0000               M         NOP
027A   0000               M         NOP
027B   0000               M         NOP
027C   1086               M         BCF     signalen
027D   0000               M         NOP
027E   0000               M         NOP
027F   0188           00583         CLRF    dataport        ;make all PORTB outputs low
0280   2282           00584         CALL    inf
0281   0008           00585         RETURN
                      00586 
                      00587 ;######################################################################
                      00588 
0282                  00589 inf:    
0282   1283 1303      00590         BANKSEL INTCON
0284   168B           00591         BSF     interren
0285   0000           00592 madinf: NOP                     ;if interrupt not initialized return
0286   0000           00593         NOP
0287   0000           00594         NOP
0288   2A85           00595         GOTO    madinf
                      00596 
Warning[205]: Found directive in column 1. (END)
                      00597 END
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DECC                              00000221
DVLP                              000001A8
DVLP1                             00000190
DVLP2                             000001A0
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
HPCF0                             0000017A
HPCF2                             0000017E
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

LCDF                              00000166
LINEMSGTEMP                       00000005
LPCF0                             00000237
LPCF1                             00000235
LPCF2                             00000239
NEWLINE                           0000024C
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RBIE                              00000003
RBIF                              00000000
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXCF1                             00000144
TXCF2                             00000139
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXRF0                             0000014C
TXRF1                             00000159
TXRF2                             00000155
TXRF3                             00000162
TXSTA                             00000098
UA                                00000001
W                                 00000000
WCMF0                             000000FF
WCMF1                             00000105
WCMF2                             0000010D
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
XVLT0                             00000119
XVLT2                             00000120
XVLT3                             00000126
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
adinit                            000000DC
bitbuzz                           PORTB,2
bitc                              STATUS,C
bitz                              STATUS,Z
cmd                               00000276
counth                            00000022
countl                            00000023
dataen                            PORTB,0
dataport                          PORTD
decerr                            00000029
decimals                          000001D7
divide                            00000186
finalmean                         00000020
finalmeanf                        00000021
getmean                           000001AB
highvolt                          00000049
hpc                               0000016A
inf                               00000282
interren                          INTCON,T0IE
interrupt                         000000AD
lcdinit                           000000E4
lcdptr                            0000003C
lcdroutine                        00000169
lowvolt                           00000048
lpc                               0000022B
m0                                00000032
m1                                00000031
m2                                00000030
m3                                0000002F
m4                                0000002E
m5                                0000002D
m6                                0000002C
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

m7                                0000002B
madinf                            00000285
main                              000000C7
margin                            0000002A
meancount                         00000026
msg0                              00000006
msg1                              00000017
msg2                              00000036
msg3                              00000052
msg5                              0000006F
msg6                              00000090
msgptr                            00000035
sendchar                          00000267
sendmsg                           0000023C
sendvarmsg                        0000024F
sendxmsg                          00000227
signal                            
signalen                          PORTB,1
t0                                0000003E
t1                                0000003F
t2                                00000040
t3                                00000041
t4                                00000042
t5                                00000043
t6                                00000044
t7                                00000045
t8                                00000046
t9                                00000047
tcounth                           00000024
tcountl                           00000025
tdatah                            00000027
tdatal                            00000028
tempchar                          0000003D
timerinit                         000000D4
txchk                             00000033
txchk1                            00000034
usartcheck                        00000135
usartinit                         000000F2
usartroutine                      0000014A
var0                              00000036
var1                              00000037
var2                              00000038
var3                              00000039
var4                              0000003A
var5                              0000003B
welcome                           000000FD
xvoltage                          00000115
MPASM  5.37                      PROJECTX.ASM   4-25-2011  0:15:52         PAGE 22


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXX------- ---------------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   646
Program Memory Words Free:  7546


Errors   :     0
Warnings :    29 reported,     0 suppressed
Messages :    17 reported,     0 suppressed

